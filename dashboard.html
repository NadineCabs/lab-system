<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Computer Lab System</title>
  <link rel="stylesheet" href="dashboard-style.css">
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header-content">
      <div class="logo-section">
        <div class="logo-small">
          <img src="logo.png" alt="Logo" class="logo-img-small">
        </div>
        <h2 class="site-name">Computer Lab System</h2>
      </div>
      <button onclick="logout()" class="btn-logout">Logout</button>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="main-content">
    <div class="container">
      
      <!-- WELCOME CARD -->
      <div class="welcome-card">
        <div class="welcome-header">
          <div>
            <h1 class="welcome-title">Welcome back, <span id="userName">Student</span>! ğŸ‘‹</h1>
            <p class="welcome-subtitle">Here's your lab information</p>
          </div>
        </div>
        
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">Full Name</span>
            <span class="info-value" id="userFullName">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">Student ID</span>
            <span class="info-value" id="userStudentId">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">Username</span>
            <span class="info-value" id="userUsername">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">Role</span>
            <span class="info-value" id="userRole">Student</span>
          </div>
        </div>
      </div>

      <!-- SUCCESS MESSAGE -->
      <div class="success-card">
        <div class="success-icon">âœ…</div>
        <h2 class="success-title">Login Successful!</h2>
        <p class="success-text">You have successfully logged into the Computer Lab System.</p>
      </div>

      <!-- COMING SOON FEATURES -->
      <div class="features-card">
        <h3 class="features-title">ğŸš€ Coming Soon Features</h3>
        <p class="features-subtitle">Phase 2 - Lab Management Tools</p>
        
        <div class="features-grid">
          <div class="feature-item">
            <div class="feature-icon">â°</div>
            <h4>Time-In / Time-Out</h4>
            <p>Track your lab entry and exit times</p>
          </div>
          
          <div class="feature-item">
            <div class="feature-icon">ğŸ’»</div>
            <h4>Computer Selection</h4>
            <p>Choose and reserve your preferred seat</p>
          </div>
          
          <div class="feature-item">
            <div class="feature-icon">ğŸ“Š</div>
            <h4>Usage History</h4>
            <p>View your lab usage records</p>
          </div>
          
          <div class="feature-item">
            <div class="feature-icon">ğŸ‘¨â€ğŸ’¼</div>
            <h4>Admin Dashboard</h4>
            <p>Monitor all active lab sessions</p>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <p>Computer Lab Management System Â© 2024</p>
  </footer>

  <script>
    // Check if user is logged in
    const userData = sessionStorage.getItem('user');
    
    if (!userData) {
      // Not logged in, redirect to login page
      window.location.href = 'index.html';
    } else {
      // Display user info
      const user = JSON.parse(userData);
      document.getElementById('userName').textContent = user.full_name.split(' ')[0]; // First name only
      document.getElementById('userFullName').textContent = user.full_name;
      document.getElementById('userStudentId').textContent = user.student_id;
      document.getElementById('userUsername').textContent = user.username;
      document.getElementById('userRole').textContent = user.role.charAt(0).toUpperCase() + user.role.slice(1);
    }

    function logout() {
      // Call logout endpoint
      fetch('auth.php', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          action: 'logout'
        })
      })
      .then(response => response.json())
      .then(data => {
        // Clear session storage
        sessionStorage.removeItem('user');
        // Redirect to login
        window.location.href = 'index.html';
      })
      .catch(error => {
        // Even if error, still logout locally
        sessionStorage.removeItem('user');
        window.location.href = 'index.html';
      });
    }
  </script>
</body>
</html>